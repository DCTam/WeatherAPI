<!DOCTYPE html>

<html>
    <head>
        <title>Weather</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    </head>
    
<body id="background">
    <div class="container-fluid text-center" id="main">
        Weather
        <br>
        <a id='getBut' class='btn btn-primary'>Get weather</a>
        <br>
        <p id="demo">Change this</p>
    </div>
    
    
</body>

</html>

            
<style text="text/css">
    #main{
        font-size: 70px;
        color: white;
    }
    
    #background{
        background-color: #333333;
    }
</style>

<script>

var lat;
var long;
var API_KEY;
var stats;
    
$(document).ready(function(){
    $('#getBut').on('click', function(){
//        $('#demo').empty;
//        $('#demo').html("hi");
        printHi();

        //getLocation();
    });
});
    //var x = document.getElementById('demo');
    function getLocation(){
        if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition(showPosition);
                            printHi();
            
        }
        else {
            $('#demo').html("Geolocation not supported");
        }
    }
    
    function showPosition(position){
        //x.innerHTML = "latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;
        lat = position.coords.latitude;
        long = position.coords.longitude;
        API_KEY = "api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + long + "&APPID=dfe9ed8aa9d92b8fffb71fb2a436666c";
       
        $.ajax({
            url: API_KEY,
            type: "GET",
            success: function(data){
                $('#demo').append("<p>" + data.main[0] + "<p>");
            }
            error: function(){
                $('#demo').html("<p>" + "error" + "<p>");
            }
        });
       // $('#demo').html("Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude);
        //$('#demo').append("<p>" + API_KEY + "<p>");

    }
    
    function printHi(){
        alert("hi");
    }
</script>
