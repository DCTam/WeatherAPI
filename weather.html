<!DOCTYPE html>

<html>
    <head>
        <title>Weather</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    </head>
    
<body id="background">
    <div class="container-fluid text-center" id="main">
        Weather
        <br>
        <a id='getBut' class='btn btn-primary'>Get weather</a>
        <br>
        <p id="demo">Change this</p>
    </div>
    
    
</body>

</html>

            
<style text="text/css">
    #main{
        font-size: 70px;
        color: white;
    }
    
    #background{
        background-color: #333333;
    }
</style>

<script>

var lat;
var long;
var API_KEY;
var stats;
var temp;
var locationName;

    
$(document).ready(function(){
    $('#getBut').on('click', function(){
        getLocation();
    });
});
    function getLocation(){
        if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition(showPosition);            
        }
        else {
            $('#demo').html("Geolocation not supported");
        }
    }
    
    function showPosition(position){
        lat = position.coords.latitude;
        long = position.coords.longitude;
       API_KEY = "http://api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + long + "&APPID=dfe9ed8aa9d92b8fffb71fb2a436666c";
        getWeather();
       //$('#demo').html("Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude);
    }
    
    function getWeather(){
        $.getJSON(API_KEY, function(weather){
            temp = ((weather.main.temp - 273.15) * 1.8) + 32;
            locationName = weather.name;
            printOutStat();

        });
    }
        
    
    function printOutStat(){
        $('#demo').html(temp.toFixed(1) + " Fahrenheit");
        $('#demo').append("<p>" + locationName + "<p>");
    }

</script>
